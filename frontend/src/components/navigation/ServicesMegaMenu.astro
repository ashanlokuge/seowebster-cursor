---
// ServicesMegaMenu Component - SEOWebster Professional Mega Menu
// Modern, responsive mega menu with exact specifications

// Service data for Core SEO Services
const coreServices = [
  {
    title: "Technical SEO",
    description: "Optimize website structure and performance for search engines",
    icon: "‚öôÔ∏è",
    link: "/services/technical-seo"
  },
  {
    title: "On-Page SEO",
    description: "Optimize content, meta tags, and internal linking structure",
    icon: "üìÑ",
    link: "/services/on-page-seo"
  },
  {
    title: "Off-Page SEO",
    description: "Build quality backlinks and improve domain authority",
    icon: "üîó",
    link: "/services/off-page-seo"
  },
  {
    title: "Local SEO",
    description: "Dominate local search results and attract nearby customers",
    icon: "üìç",
    link: "/services/local-seo"
  },
  {
    title: "Keyword Research",
    description: "Discover high-value keywords with low competition",
    icon: "üîç",
    link: "/services/keyword-research"
  },
  {
    title: "Content Optimization",
    description: "Create SEO-optimized content that ranks and converts",
    icon: "‚úçÔ∏è",
    link: "/services/content-optimization"
  },
  {
    title: "Site Audit",
    description: "Comprehensive analysis of your website's SEO health",
    icon: "‚úÖ",
    link: "/services/site-audit"
  },
  {
    title: "SEO Consultation",
    description: "Expert guidance and strategic planning for growth",
    icon: "üí¨",
    link: "/services/seo-consultation"
  }
];

// Service data for Advanced SEO Services
const advancedServices = [
  {
    title: "Programmatic SEO",
    description: "Scalable SEO using data-driven content generation",
    icon: "ü§ñ",
    link: "/services/programmatic-seo"
  },
  {
    title: "AI-Powered SEO",
    description: "Leverage artificial intelligence for advanced optimization",
    icon: "üß†",
    link: "/services/ai-seo"
  },
  {
    title: "E-commerce SEO",
    description: "Specialized optimization for online stores and marketplaces",
    icon: "üõí",
    link: "/services/ecommerce-seo"
  },
  {
    title: "Enterprise SEO",
    description: "Large-scale SEO strategies for enterprise businesses",
    icon: "üè¢",
    link: "/services/enterprise-seo"
  },
  {
    title: "International SEO",
    description: "Multi-language and multi-region search optimization",
    icon: "üåê",
    link: "/services/international-seo"
  },
  {
    title: "Voice SEO",
    description: "Optimize for voice search and virtual assistants",
    icon: "üé§",
    link: "/services/voice-seo"
  },
  {
    title: "Video SEO",
    description: "Optimize video content for search engine visibility",
    icon: "üé•",
    link: "/services/video-seo"
  },
  {
    title: "Schema Markup",
    description: "Implement structured data for rich search results",
    icon: "üè∑Ô∏è",
    link: "/services/schema-markup"
  }
];

// Category data for the visual summary panel
const categoryData = {
  core: {
    title: "Core SEO Services",
    description: "Essential SEO services to establish your online presence and drive organic growth.",
    image: "üéØ",
    benefits: [
      "Improved search rankings",
      "Increased organic traffic",
      "Better user experience",
      "Higher conversion rates"
    ]
  },
  advanced: {
    title: "Advanced SEO Services",
    description: "Cutting-edge SEO solutions for businesses ready to dominate their market.",
    image: "üöÄ",
    benefits: [
      "Enterprise-level optimization",
      "AI-powered insights",
      "Scalable SEO strategies",
      "Competitive advantage"
    ]
  }
};
---

<!-- Background Overlay for Focus Effect -->
<div class="services-mega-menu-overlay fixed inset-0 bg-black bg-opacity-30 backdrop-blur-sm z-[1002] opacity-0 invisible transition-all duration-300 ease-out"></div>

<!-- Mega Menu Container - Tab-based layout with CMS-style sizing -->
<div class="services-mega-menu fixed left-1/2 transform -translate-x-1/2 bg-white shadow-xl z-[1003] opacity-0 invisible transition-all duration-200 ease-in-out" style="top: calc(64px + 20px); width: min(90vw, 1200px); border-radius: 12px; box-shadow: 0 10px 30px rgba(0,0,0,0.15); padding: 40px;">
  <div class="w-full py-6 min-h-[400px] bg-white rounded-12">
    <div class="flex h-full">
      
      <!-- Column 1: Navigation Categories (Left sidebar) - Tab buttons -->
      <div class="w-[200px] border-r border-gray-100 px-4">
        <div class="space-y-2">
          <button 
            class="w-full text-left px-4 py-3 transition-all duration-300 hover:bg-gradient-to-r hover:from-orange-50 hover:to-orange-100 tab-button active text-[#ff6400] bg-gradient-to-r from-orange-50 to-orange-100 rounded-xl border border-orange-200 shadow-sm"
            data-category="core"
          >
            <div class="flex items-center justify-between">
              <span class="font-semibold font-sans text-sm">Core SEO Services</span>
              <svg class="w-4 h-4 text-[#ff6400] transform rotate-90" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
              </svg>
            </div>
          </button>
          
          <button 
            class="w-full text-left px-4 py-3 transition-all duration-300 hover:bg-gradient-to-r hover:from-gray-50 hover:to-gray-100 tab-button text-[#272d3e] rounded-xl border border-transparent hover:border-gray-200"
            data-category="advanced"
          >
            <div class="flex items-center justify-between">
              <span class="font-semibold font-sans text-sm">Advanced SEO Services</span>
              <svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
              </svg>
            </div>
          </button>
        </div>
      </div>
      
      <!-- Enhanced divider with gradient -->
      <div class="w-px bg-gradient-to-b from-transparent via-gray-200 to-transparent mx-2"></div>
      
      <!-- Column 2: Services Grid (Middle content) -->
      <div class="w-[600px] px-6">
        <div class="service-cards" id="core-services">
          <div class="grid grid-cols-2 gap-3">
            {coreServices.map((service) => (
              <a 
                href={service.link}
                class="group p-4 rounded-lg border border-gray-100 bg-white hover:border-[#ff6400] hover:shadow-lg hover:shadow-orange-100/50 transition-all duration-300 transform hover:-translate-y-1"
              >
                <div class="flex items-start space-x-3">
                  <div class="flex-shrink-0 w-10 h-10 bg-gradient-to-br from-orange-50 to-orange-100 rounded-lg flex items-center justify-center shadow-sm group-hover:shadow-md transition-all duration-300">
                    <span class="text-[#ff6400] text-lg">{service.icon}</span>
                  </div>
                  <div class="flex-1 min-w-0">
                    <h4 class="font-bold text-[#272d3e] group-hover:text-[#ff6400] transition-colors duration-300 text-sm mb-1">
                      {service.title}
                    </h4>
                    <p class="text-xs text-gray-600 leading-relaxed group-hover:text-gray-700">
                      {service.description}
                    </p>
                  </div>
                </div>
              </a>
            ))}
          </div>
        </div>
        
        <div class="service-cards hidden" id="advanced-services">
          <div class="grid grid-cols-2 gap-3">
            {advancedServices.map((service) => (
              <a 
                href={service.link}
                class="group p-4 rounded-lg border border-gray-100 bg-white hover:border-[#ff6400] hover:shadow-lg hover:shadow-orange-100/50 transition-all duration-300 transform hover:-translate-y-1"
              >
                <div class="flex items-start space-x-3">
                  <div class="flex-shrink-0 w-10 h-10 bg-gradient-to-br from-gray-50 to-gray-100 rounded-lg flex items-center justify-center shadow-sm group-hover:shadow-md transition-all duration-300">
                    <span class="text-[#272d3e] text-lg">{service.icon}</span>
                  </div>
                  <div class="flex-1 min-w-0">
                    <h4 class="font-bold text-[#272d3e] group-hover:text-[#ff6400] transition-colors duration-300 text-sm mb-1">
                      {service.title}
                    </h4>
                    <p class="text-xs text-gray-600 leading-relaxed group-hover:text-gray-700">
                      {service.description}
                    </p>
                  </div>
                </div>
              </a>
            ))}
          </div>
        </div>
      </div>
      
      <!-- Enhanced divider with gradient -->
      <div class="w-px bg-gradient-to-b from-transparent via-gray-200 to-transparent mx-2"></div>
      
      <!-- Column 3: Visual Summary Panel (Right sidebar) -->
      <div class="w-[320px] px-4">
        <div class="category-description" id="core-description">
          <div class="bg-gradient-to-br from-orange-50 via-orange-50 to-orange-100 rounded-xl p-4 h-full border border-orange-200 shadow-sm">
            <!-- Featured Image/Icon -->
            <div class="text-center mb-4">
              <div class="w-16 h-16 bg-white rounded-full flex items-center justify-center mx-auto mb-3 shadow-md border border-orange-100">
                <span class="text-3xl">{categoryData.core.image}</span>
              </div>
              <h3 class="text-lg font-bold text-[#272d3e] mb-2 font-sans">{categoryData.core.title}</h3>
              <p class="text-xs text-gray-600 leading-relaxed">{categoryData.core.description}</p>
            </div>
            
            <!-- Key Benefits Checklist -->
            <div class="space-y-2">
              <h4 class="font-semibold text-[#272d3e] text-sm mb-2">Key Benefits:</h4>
              {categoryData.core.benefits.map((benefit) => (
                <div class="flex items-center space-x-2">
                  <div class="w-4 h-4 bg-[#ff6400] rounded-full flex items-center justify-center flex-shrink-0 shadow-sm">
                    <svg class="w-2.5 h-2.5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"></path>
                    </svg>
                  </div>
                  <span class="text-xs text-[#272d3e] font-medium">{benefit}</span>
                </div>
              ))}
            </div>
          </div>
        </div>
        
        <div class="category-description hidden" id="advanced-description">
          <div class="bg-gradient-to-br from-gray-50 via-gray-50 to-gray-100 rounded-xl p-4 h-full border border-gray-200 shadow-sm">
            <!-- Featured Image/Icon -->
            <div class="text-center mb-4">
              <div class="w-16 h-16 bg-white rounded-full flex items-center justify-center mx-auto mb-3 shadow-md border border-gray-100">
                <span class="text-3xl">{categoryData.advanced.image}</span>
              </div>
              <h3 class="text-lg font-bold text-[#272d3e] mb-2 font-sans">{categoryData.advanced.title}</h3>
              <p class="text-xs text-gray-600 leading-relaxed">{categoryData.advanced.description}</p>
            </div>
            
            <!-- Key Benefits Checklist -->
            <div class="space-y-2">
              <h4 class="font-semibold text-[#272d3e] text-sm mb-2">Key Benefits:</h4>
              {categoryData.advanced.benefits.map((benefit) => (
                <div class="flex items-center space-x-2">
                  <div class="w-4 h-4 bg-[#ff6400] rounded-full flex items-center justify-center flex-shrink-0 shadow-sm">
                    <svg class="w-2.5 h-2.5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"></path>
                    </svg>
                  </div>
                  <span class="text-xs text-[#272d3e] font-medium">{benefit}</span>
                </div>
              ))}
            </div>
          </div>
        </div>
      </div>
      
    </div>
  </div>
</div>

<script>
  // Services mega menu functionality with tab switching and hover behavior
  document.addEventListener('DOMContentLoaded', function() {
    const tabButtons = document.querySelectorAll('.tab-button');
    const serviceCards = document.querySelectorAll('.service-cards');
    const categoryDescriptions = document.querySelectorAll('.category-description');
    const megaMenuContainer = document.querySelector('.services-mega-menu');
    
    function switchTab(category: string) {
      // Update active tab styling with SEOWebster primary color
      tabButtons.forEach(btn => {
        btn.classList.remove('active', 'text-[#ff6400]', 'bg-gradient-to-r', 'from-orange-50', 'to-orange-100', 'border-orange-200', 'shadow-sm');
        btn.classList.add('text-[#272d3e]', 'border-transparent');
        const arrow = btn.querySelector('svg');
        if (arrow) {
          arrow.classList.remove('text-[#ff6400]', 'transform', 'rotate-90');
          arrow.classList.add('text-gray-400');
        }
      });
      
      const activeButton = document.querySelector(`[data-category="${category}"]`);
      if (activeButton) {
        activeButton.classList.add('active', 'text-[#ff6400]', 'bg-gradient-to-r', 'from-orange-50', 'to-orange-100', 'border-orange-200', 'shadow-sm');
        activeButton.classList.remove('text-[#272d3e]', 'border-transparent');
        const activeArrow = activeButton.querySelector('svg');
        if (activeArrow) {
          activeArrow.classList.remove('text-gray-400');
          activeArrow.classList.add('text-[#ff6400]', 'transform', 'rotate-90');
        }
      }
      
      // Smooth transition for service cards
      serviceCards.forEach(cards => {
        if (cards instanceof HTMLElement) {
          cards.style.opacity = '0';
          setTimeout(() => {
            cards.classList.add('hidden');
          }, 100);
        }
      });
      
      setTimeout(() => {
        const targetServices = document.getElementById(`${category}-services`);
        if (targetServices) {
          targetServices.classList.remove('hidden');
          targetServices.style.opacity = '1';
        }
      }, 100);
      
      // Smooth transition for category descriptions
      categoryDescriptions.forEach(desc => {
        if (desc instanceof HTMLElement) {
          desc.style.opacity = '0';
          setTimeout(() => {
            desc.classList.add('hidden');
          }, 100);
        }
      });
      
      setTimeout(() => {
        const targetDescription = document.getElementById(`${category}-description`);
        if (targetDescription) {
          targetDescription.classList.remove('hidden');
          targetDescription.style.opacity = '1';
        }
      }, 100);
    }
    
    tabButtons.forEach(button => {
      // Click functionality
      button.addEventListener('click', function(this: HTMLElement) {
        const category = this.getAttribute('data-category');
        if (category) {
          switchTab(category);
        }
      });
      
      // Hover functionality for better UX
      button.addEventListener('mouseenter', function(this: HTMLElement) {
        const category = this.getAttribute('data-category');
        if (category) {
          switchTab(category);
        }
      });
    });

    // Enhanced hover behavior using global menu manager
    let hideTimeout: number;
    
    // Find the Services dropdown trigger
    const servicesDropdownTrigger = Array.from(document.querySelectorAll('div.relative.group')).find(element => {
      const button = element.querySelector('button');
      return button && button.textContent?.trim().includes('Services');
    });
    
    // Wait for global menu manager to be available
    function waitForMenuManager() {
      if (typeof window.MegaMenuManager !== 'undefined') {
        initializeServicesMenu();
      } else {
        setTimeout(waitForMenuManager, 100);
      }
    }
    
    function initializeServicesMenu() {
      // Add hover events to the dropdown trigger (Services button)
      if (servicesDropdownTrigger) {
        servicesDropdownTrigger.addEventListener('mouseenter', function() {
          clearTimeout(hideTimeout);
          window.MegaMenuManager.showMenu('services');
        });
        
        servicesDropdownTrigger.addEventListener('mouseleave', function() {
          hideTimeout = setTimeout(() => {
            window.MegaMenuManager.hideMenu('services');
          }, 200);
        });
      }
      
      // Add hover events to the mega menu container
      if (megaMenuContainer) {
        megaMenuContainer.addEventListener('mouseenter', function() {
          clearTimeout(hideTimeout);
        });
        
        megaMenuContainer.addEventListener('mouseleave', function() {
          window.MegaMenuManager.hideMenu('services');
        });
      }
      
      // Hide mega menu when clicking outside
      document.addEventListener('click', function(event) {
        if (megaMenuContainer &&
            !megaMenuContainer.contains(event.target as Node) &&
            !servicesDropdownTrigger?.contains(event.target as Node)) {
          window.MegaMenuManager.hideMenu('services');
        }
      });
    }
    
    // Start initialization
    waitForMenuManager();
  });
</script>

<style>
  /* Enhanced custom styles with better visual engagement */
  .tab-button.active {
    background: linear-gradient(135deg, #fff7ed 0%, #fed7aa 100%);
    border-color: #ff6400;
    box-shadow: 0 4px 12px rgba(255, 100, 0, 0.15);
    transform: translateY(-1px);
  }
  
  .tab-button:hover:not(.active) {
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  }
  
  .service-cards {
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  .category-description {
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  /* Enhanced service card hover effects */
  .service-cards a {
    position: relative;
    overflow: hidden;
  }
  
  .service-cards a::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 100, 0, 0.05), transparent);
    transition: left 0.5s ease;
  }
  
  .service-cards a:hover::before {
    left: 100%;
  }
  
  /* Enhanced icon containers */
  .service-cards .flex-shrink-0 {
    position: relative;
    overflow: hidden;
  }
  
  .service-cards .flex-shrink-0::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.2) 0%, transparent 100%);
    opacity: 0;
    transition: opacity 0.3s ease;
  }
  
  .service-cards a:hover .flex-shrink-0::after {
    opacity: 1;
  }
  
  /* Enhanced dividers */
  .w-px.bg-gradient-to-b {
    position: relative;
  }
  
  .w-px.bg-gradient-to-b::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(180deg, transparent 0%, rgba(255, 100, 0, 0.3) 50%, transparent 100%);
    opacity: 0;
    transition: opacity 0.3s ease;
  }
  
  .services-mega-menu:hover .w-px.bg-gradient-to-b::before {
    opacity: 1;
  }
  
  /* Enhanced category description panels */
  .category-description > div {
    position: relative;
    overflow: hidden;
  }
  
  .category-description > div::before {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: radial-gradient(circle, rgba(255, 255, 255, 0.1) 0%, transparent 70%);
    opacity: 0;
    transition: opacity 0.5s ease;
    pointer-events: none;
  }
  
  .category-description:hover > div::before {
    opacity: 1;
  }
  
  /* Enhanced checkmark animations */
  .category-description .w-5 {
    position: relative;
    overflow: hidden;
  }
  
  .category-description .w-5::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.3) 0%, transparent 100%);
    opacity: 0;
    transition: opacity 0.3s ease;
  }
  
  .category-description:hover .w-5::before {
    opacity: 1;
  }
  
  /* Ensure mega menu stays above other content */
  .services-mega-menu {
    position: fixed !important;
    z-index: 1003 !important;
    backdrop-filter: blur(10px);
  }
  
  /* Ensure overlay is properly positioned */
  .services-mega-menu-overlay {
    position: fixed !important;
    z-index: 1002 !important;
    backdrop-filter: blur(8px);
  }
  
  /* Smooth entrance animation */
  .services-mega-menu.visible {
    animation: slideInDown 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  @keyframes slideInDown {
    from {
      opacity: 0;
      transform: translate(-50%, -20px);
    }
    to {
      opacity: 1;
      transform: translate(-50%, 0);
    }
  }
  
  /* Responsive design */
  @media (max-width: 768px) {
    /* Show mobile accordion version and keep container responsive */
    .services-mega-menu {
      display: block;
      width: calc(100vw - 2rem) !important;
      padding: 1rem !important;
      left: 50%;
      transform: translateX(-50%);
    }
  }
  
  @media (min-width: 769px) and (max-width: 1024px) {
    /* Tablet view - convert to accordion style */
    .services-mega-menu {
      max-width: 100%;
      padding: 0 1rem;
    }
    
    .flex.h-full {
      flex-direction: column;
    }
    
    .w-[220px], .w-[640px], .w-[440px] {
      width: 100%;
    }
    
    .w-px {
      display: none;
    }
  }
  
  @media (min-width: 1025px) {
    /* Desktop - ensure proper centering */
    .services-mega-menu {
      margin-left: auto;
      margin-right: auto;
    }
  }
</style>